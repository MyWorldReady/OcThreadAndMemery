<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title id="xxxf">The Frameset Boilerplate</title>


    <script type="text/javascript">

            function pcIndex(){              
              document.write("<frameset id=\"indexHtml\" border=\"0\" cols=\"10%,*\">")
               document.write("<frame src=\"menus/sidebar.html\" name=\"sidebar\">")
               document.write("<frame id=\"mMainFrames\" src=\"frames/main.html\" name=\"main\">")
               document.write("</frameset>")
            }

            function phoneIndex(){    
              // Get the browser window size
              var windowWidth = window.innerWidth;
              var windowHeight = window.innerHeight;
              // console.log("windowHeight===")
              // console.log(windowWidth)
              // console.log(windowHeight)

          
              document.write("<frameset id=\"indexHtml\" border=\"0\" cols=\"10%,*\">")
               document.write("<frame src=\"menus/sidebar.html\" name=\"sidebar\">")
               if(windowWidth>windowHeight){
                // document.write("<frameset border=\"0\" rows=\"9*,*\">")
                document.write("<frameset border=\"0\" rows=\"*,40\">")
              }else{
                document.write("<frameset border=\"0\" rows=\"*,90\">")
              }
               
               document.write("<frame id=\"mMainFrames\" src=\"frames/main.html\" name=\"main\">")
               document.write("<frame src=\"frames/footer.html\" name=\"footer\">")
               document.write("</frameset>")
               document.write("</frameset>")
            }

            //平台、设备和操作系统
            var system = {
                win: false,
                mac: false,
                xll: false,
                ipad:false
            };
            //检测平台
            var p = navigator.platform;
            system.win = p.indexOf("Win") == 0;
            system.mac = p.indexOf("Mac") == 0;
            system.x11 = (p == "X11") || (p.indexOf("Linux") == 0);
            system.ipad = (navigator.userAgent.match(/iPad/i) != null)?true:false;
            //跳转语句，如果是手机访问就自动跳转到wap.baidu.com页面
            if (system.win || system.mac || system.xll||system.ipad) { //电脑 ipad
                pcIndex();
            } else {                                                    //手机
                phoneIndex();
            }

            document.onreadystatechange=function(){
                var oFrm = document.getElementById("mMainFrames");
                oFrm.onload = oFrm.onreadystatechange = function() {
                    window.scrollTo(0,0);
                }
            }

            var showCol = "10%,*";
            var hideCol = "0%,*";
            var sidebarIsShow = false
            var mFrameset = document.getElementById("indexHtml")
            
            addEventListener('message', e => {
                // e.data为子页面发送的数据
                var data = e.data
                if(data!=null && data["mKey"] == "LongPressSwitch"){
                    var sidebarStatus = data["status"]
                    if(sidebarIsShow!=sidebarStatus){
                      if(sidebarStatus){
                        mFrameset.cols=showCol;
                      }
                      else{
                        mFrameset.cols=hideCol;
                      }
                    }
                    sidebarIsShow = sidebarStatus
                }
                
            })

    </script>

</head>

<!-- <frameset border="0" cols="10%,*">
	<frame src="menus/sidebar.html" name="sidebar">
	<frameset border="0" rows="*,90">
        <frame id="mMainFrames" src="frames/main.html" name="main">
        <frame src="frames/footer.html" name="footer">
	</frameset>
</frameset> -->


</html>
